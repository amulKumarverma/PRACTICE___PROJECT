document.addEventListener("DOMContentLoaded", () => {
  const { jsPDF } = window.jspdf;

  document.getElementById("download-pdf").addEventListener("click", () => {
    const doc = new jsPDF();

    // Title
    doc.setFontSize(18);
    doc.text("AI Crop Health Report", 20, 20);

    // Fetch summary dynamically
    let summary = document.getElementById("report-summary").innerText;
    let lines = doc.splitTextToSize(summary, 180);

    // Add content
    doc.setFontSize(12);
    doc.text(lines, 20, 40);

    // Footer
    doc.setFontSize(10);
    doc.text("Generated by AI Crop Monitoring System", 20, 280);

    // Save
    doc.save("AI_Crop_Report.pdf");
  });
});

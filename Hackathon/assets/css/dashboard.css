 /* --- Improved Styles --- */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: #f5f7fa;
      color: #333;
    }

    header.topbar {
      background: #2a9d8f;
      padding: 12px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    header.topbar .brand a {
      color: white;
      font-weight: 700;
      font-size: 1.8rem;
      text-decoration: none;
      user-select: none;
    }

    nav a {
      margin-left: 20px;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 15px;
      color: #dbe9e7;
      text-decoration: none;
      transition: background 0.3s, color 0.3s;
    }
    nav a:hover {
      background: #264653;
      color: white;
    }
    nav a.active, nav a:hover.active {
      background: white;
      color: #2a9d8f;
      font-weight: 700;
      box-shadow: 0 0 10px #2a9d8f88;
    }

    nav a#logoutLink {
      background: #e76f51;
      color: white;
      font-weight: 600;
      box-shadow: 0 0 8px #e76f51aa;
    }
    nav a#logoutLink:hover {
      background: #d45339;
    }

    .analysis-section {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
      padding: 40px 30px;
      border-radius: 15px;
      margin: 30px auto;
      max-width: 900px;
      box-shadow: 0 4px 15px rgba(255, 105, 97, 0.3);
      text-align: center;
    }
    .analysis-section h2 {
      margin-bottom: 10px;
      font-weight: 700;
      font-size: 2rem;
      color: #333;
    }
    .analysis-section p {
      font-size: 1.1rem;
      margin-bottom: 25px;
      color: #555;
    }
    #analysisForm, #soilForm {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    #analysisForm label, #soilForm label {
      font-weight: 600;
      font-size: 1.1rem;
      color: #444;
    }
    #analysisForm input[type="file"], #soilForm input[type="file"] {
      border-radius: 12px;
      padding: 6px 12px;
      border: 1px solid #ccc;
      cursor: pointer;
      font-size: 1rem;
    }
    .btn {
      background: #2a9d8f;
      border: none;
      color: white;
      padding: 10px 25px;
      font-size: 1rem;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s ease;
    }
    .btn:hover {
      background: #21867a;
    }
    .btn:disabled {
      background: #aaa;
      cursor: not-allowed;
    }
    .result-card {
      margin-top: 30px;
      background: white;
      padding: 25px 30px;
      border-radius: 15px;
      box-shadow: 0 4px 18px rgba(0,0,0,0.08);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
    }
    .result-card h3 {
      margin-bottom: 15px;
      color: #2a9d8f;
    }
    .result-card img {
      display: block;
      margin-bottom: 20px;
      border-radius: 12px;
      max-width: 100%;
      object-fit: cover;
    }
    .result-card p {
      margin: 8px 0;
      font-size: 1rem;
      color: #444;
    }
    .result-card strong {
      color: #111;
    }

    /* Grid Layout */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 30px;
      padding: 40px 30px;
      max-width: 1200px;
      margin: 0 auto 60px auto;
    }

    .card {
      background: white;
      border-radius: 15px;
      padding: 20px 25px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      transition: box-shadow 0.3s ease;
    }
    .card:hover {
      box-shadow: 0 6px 28px rgba(0,0,0,0.15);
    }

    .card.full {
      grid-column: 1 / -1;
      color: white;
      padding: 30px;
      border-radius: 20px;
      background: linear-gradient(135deg, #e63946, #1d3557);
      box-shadow: 0 8px 35px rgba(230, 57, 70, 0.5);
    }

    .card h2 {
      margin-bottom: 20px;
      color: inherit;
      font-weight: 700;
      font-size: 1.5rem;
    }

    /* Map Card */
    .map-card #map {
      height: 450px;
      border-radius: 15px;
      border: 1px solid #ddd;
      margin-bottom: 15px;
    }
    .map-legend {
      display: flex;
      gap: 15px;
      font-size: 0.9rem;
      align-items: center;
      color: #555;
    }
    .legend {
      display: inline-block;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      margin-right: 6px;
    }
    .legend.healthy {
      background-color: #4caf50;
    }
    .legend.stressed {
      background-color: #fbc02d;
    }
    .legend.pest {
      background-color: #e53935;
    }

    /* Soil Metrics */
    .metrics {
      display: flex;
      justify-content: space-around;
      gap: 15px;
      margin-bottom: 25px;
    }
    .metric {
      flex: 1;
      text-align: center;
      padding: 15px 10px;
      border-radius: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      font-weight: 700;
      color: #333;
    }
    .metric-value {
      font-size: 1.8rem;
      margin-bottom: 6px;
      font-family: 'Courier New', Courier, monospace;
    }
    .metric-label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 600;
    }
    .card#pred{
      width: 760px;
    }

    /* AI Predictions & Alerts */
    .pred-list,
    .alerts-list {
      list-style: none;
      padding-left: 0;
      max-height: 150px;
      overflow-y: auto;
    }
    .pred-list li,
    .alerts-list li {
      padding: 8px 12px;
      border-bottom: 1px solid #eee;
      font-weight: 600;
      font-size: 1rem;
      color: #444;
    }
    .alerts-list li {
      color: #e63946;
    }

    /* Canvas */
    canvas {
      width: 100% !important;
      max-height: 160px !important;
      border-radius: 10px;
    }
    /* Make map-card span 2 columns on wider screens */
@media (min-width: 900px) {
  .map-card {
    grid-column: span 2;
  }
}